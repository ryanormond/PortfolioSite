---
title: Lighting Controller
subtitle: MTL studio Lighting
layout: default
modal-id: 2
date: 2018-05-01
img: LightingStudio.png
thumbnail: Studio_thumb.png
alt: image-alt
project-date: May 2018
client: University of Sussex
category: Software Development & electronics
description: The project required a micro controller to be installed in a studio on campus to control the colours of light boxes around the walls remotely from the gallery (control room). The micro controller code was to be written in the language C and scripts were required to be written in the language LUA to be run from software (Just Macros) on a unit/server in the gallery for commands. Git was used for version control and for monitoring by the project manager.<br/>An electrical diagram was provided by the project manager with the overview of the project. The diagram showed the necessary components to be sourced and then constructed around the micro controller, this included a PCB board, specific resistors and others. An electrical containment box was also ordered as the board would be running mains power from a breaker point in the studio to be able to power the lights and the controller. <br/> The light boxes consisted of 24 led custom lighting strips, 3 chained from each 24v pack and connected to the PCB. The PCB was needed as the connection between the micro controller and mains power/lighting had to be reduced, the micro controller was mounted to the board and resistors were put in place along with new wire able to support the current. This meant for meticulous testing after constructing the board and calculating of the current and power needed. I worked on and constructed the electronics following the project managers schematic design and then teamed up with the lead technician to ensure the setup was to safety standards required by the university, this was in turn checked by the university inspector to be signed off. We ran all the cables in the gallery and studio following the project managers layout and thoroughly tested all outlets and power packs. At the end provided a safety report of the full installation to the project manager.<br/> The micro controllers code was written in C and had a connection to a secure internal network port where it would be listening for any commands sent via the network. It received commands over UDP to operate the soft light boxes it was connected to around the studio.<br/> The scripts that were written in LUA run from a piece of software called JustMacros. The exciting part of the project is the LUA scripts function can be passed an RGB value of any colour along with a frequency code for Pulse Width Modulation of the led's. This is done via a simple one line call E.G ledLightColourControl(red, green, blue, frequency), call scripts can be used and mapped to a macro pad in the gallery so at the push of a button the whole studio will change allowing for themes to be created for personalised presentations.<br/><br/>PWM or pulse duration modulation is essentially an imitation of an analog signal by turning the signal on and off in a pattern to simulate an steady voltage between 1-5v, used in LEDs for this project was essential as the studio used broadcasting cameras of varying types ranging from Sony EX3's to Blackmagic 4K cinema cameras. This variation meant that different frequency values provided different results for which cameras were in use e.g. lines could be seen on the light boxes as the PWM didn't match the frame rate the camera was working at.<br/> The scripts then send off the command over UDP to the controller which assess the content, calculates the PWM value and reacts accordingly, the controller is constantly listening for commands and is connected via ethernet to the gallery server, this was done to avoid any network connection loss which can happen over wireless connection the command is also triple sent to eliminate any packet loss hiccups if any at all may happen.<br/><br/> A basic stripped down version of the project and a mock script can be found on my Github, the full project is not available as it is on a private repo for confidentiality as required by the university.
---
